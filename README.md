# file_path: README.md
# Crypto Charting Client

A self-contained, cross-platform real-time crypto price charting client built with Flutter. This application connects directly to various cryptocurrency exchange WebSocket and REST APIs to provide live and historical price data.

## Architecture Overview

This project adheres to a strict architectural pattern to ensure performance and maintainability:

- **Monolithic Core (`lib/app_core.dart`):** All business logic, including exchange API adapters, data normalization, aggregation, and state management, is encapsulated in a single, pure-Dart file. This core logic runs in a dedicated background Isolate to prevent any UI jank.
- **UI Layer (`lib/main_desktop.dart`, `lib/main_mobile.dart`):** The UI is built with Flutter and is kept as "thin" as possible. It contains no business logic. Its sole responsibilities are rendering data and forwarding user input to the core Isolate.
- **Isolate Communication:** The UI and Core communicate exclusively through a `CoreIsolateBridge` class, which serializes and deserializes messages according to a strict, predefined JSON schema. This ensures a clean separation of concerns.
- **State Management:** The UI uses only the Flutter SDK's built-in tools (`ValueNotifier`, `StreamBuilder`) for state management, avoiding external packages.

### File Count Constraint

As a hard requirement of the project specification, the application logic is contained within a maximum of two Dart files per platform:
1.  `lib/app_core.dart` (shared, platform-agnostic core)
2.  One platform-specific UI entrypoint (`lib/main_desktop.dart` or `lib/main_mobile.dart`)

### State Persistence

The UI layer is responsible for determining the appropriate application support directory for the current platform using the `path_provider` package. This path is then passed to the core Isolate via an `{type:'init', stateDirPath: '...'}` message during startup. The core then uses this path to read and write its state (e.g., last selected symbol and timeframe) to a JSON file.

## Prerequisites

- [Flutter SDK](https://docs.flutter.dev/get-started/install) (stable channel, version 3.19.0 or higher)

## How to Run

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd crypto_chart_client
    ```

2.  **Get dependencies:**
    ```bash
    flutter pub get
    ```

3.  **Run the application:**

    -   **For Desktop (Windows, macOS, Linux):**
        ```bash
        # Replace <device> with 'windows', 'macos', or 'linux'
        flutter run -t lib/main_desktop.dart -d <device>
        ```

    -   **For Mobile (Android, iOS):**
        ```bash
        # Ensure an emulator is running or a device is connected
        flutter run -t lib/main_mobile.dart
        ```

## Building Artifacts

The project includes a GitHub Actions workflow (`.github/workflows/main.yml`) to automate builds.

-   **Desktop:** Unsigned release binaries for Windows, macOS, and Linux are built on every push to `main`.
-   **Android:** A debug-signed APK is built for pull requests and releases. You can find this artifact in the "Actions" tab of the GitHub repository to sideload onto a device.

## Known Limitations

-   The desktop binaries generated by the CI workflow are **unsigned**. This may cause warnings from your operating system upon first launch.
-   The list of supported trading pairs is currently hardcoded for demonstration purposes.